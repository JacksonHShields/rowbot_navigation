<?xml version="1.0"?>

<launch>


	<!--node pkg="rowbot_navigation" type="odom" name="generate_odom"/--> 


	<node pkg="rowbot_navigation" type="odom_to_tf.py" name="gazebo_odom"/> 



	<!--node pkg="robot_pose_ekf" type="robot_pose_ekf" name="robot_pose_ekf">
		<remap from="imu_data" to="rowbot/imu/data"/>
		<param name="output_frame" value="odom"/>
		<param name="base_footprint_frame" value="base_footprint"/>
		<param name="freq" value="30"/>
		<param name="sensor_timeout" value="1.0"/>  
		<param name="odom_used" value="true"/>
		<param name="imu_used" value="true"/>
		<param name="vo_used" value="false"/>
		<param name="debug" value="false"/>
		<param name="self_diagnose" value="false"/>
	</node-->

	<!--node pkg="robot_localization" type="ekf_localization_node" name="ekf_se" clear_params="true">
		  <rosparam command="load" file="$(find rowbot_navigation)/params/ekf.yaml" />

		 <  Placeholder for output topic remapping
		  <remap from="odometry/filtered" to=""/>
		  <remap from="accel/filtered" to=""/>
		  >

		</node-->


	<node pkg="pointcloud_to_laserscan" type="pointcloud_to_laserscan_node" name="pointcloud_to_laserscan">
		<remap from="cloud_in" to="rowbot/velodyne_points"/>
		<remap from="scan" to="rowbot/scan"/>
		<rosparam>
			min_height: -10
			angle_increment: 0.00872664625
			range_max: 100.0
			angle_min: -3.1415 
			angle_max: 3.1415
			use_inf: false 
		</rosparam>
	</node>

	 <!--node pkg="hector_mapping" type="hector_mapping" name="hector_mapping" output="screen">
		  <param name="pub_map_odom_transform" value="true"/>
		  <param name="map_frame" value="map" />
		  <param name="base_frame" value="base_footprint" />
		  <param name="odom_frame" value="odom" />
		  <param name="scan_topic" value="rowbot/scan"/>
	<param name="map_size" value="4096"/>
	<param name="map_resolution" value="0.1"/>
	<param name="map_pub_period" value="0.5"/>
	</node-->

	<node pkg="gmapping" type="slam_gmapping" name="gmapping_thing" output="screen" >
		<remap from="scan" to="rowbot/scan" />
		<param name="odom_frame" value="odom" />
		<param name="base_frame" value="base_link" />
		<param name="map_update_interval" value="0.5" />
		<param name="iterations" value="5" />
		<param name="minimumScore" value="600" />
		<param name="particles" value="100" />
		<param name="str" value="0" />
		<param name="srr" value="0" />
		<param name="srt" value="0" />
		<param name="stt" value="0" />
		<param name="linearUpdate" value="0.25" />
		<param name="angularUpdate" value="0.25" />
		<param name="temporalUpdate" value="0.25" />
		<param name="delta" value="0.25" />
	</node>

	<node pkg="move_base" type="move_base" respawn="false" name="move_base" output="screen">
		<rosparam file="$(find rowbot_navigation)/costmap_common_params.yaml" command="load" ns="global_costmap" />
		<rosparam file="$(find rowbot_navigation)/costmap_common_params.yaml" command="load" ns="local_costmap" />
		<rosparam file="$(find rowbot_navigation)/local_costmap_params.yaml" command="load" />
		<rosparam file="$(find rowbot_navigation)/global_costmap_params.yaml" command="load" />
		<rosparam file="$(find rowbot_navigation)/base_local_planner_params.yaml" command="load" />
	</node>

</launch>

